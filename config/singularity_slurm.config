
env {
    /* These following tools are required to run AMR++ */
    JAVA = 'java'
    TRIMMOMATIC = 'trimmomatic'
    PYTHON3 = "python3"
    BWA = "bwa"
    SAMTOOLS = "samtools"
    BEDTOOLS = 	"bedtools"
    RESISTOME = 	"resistome"
    RAREFACTION = 	"rarefaction"
    /* These next tools are optional depending on which analyses you want to run */
    KRAKEN2 = "kraken2"
}

process {
  maxForks = 2                 // The maximum number of forks a single process is allowed to spawn
  process.memory { 2.GB * task.attempt }   
  process.time { 1.hour * task.attempt }   
  process.errorStrategy { task.exitStatus == 140 ? 'retry' : 'terminate' }   
  process.maxRetries 3
  clusterOptions='--job-name=%j --ntasks=2 --partition=short'
}